---
import { Image } from "astro:assets";
import Layout from "../layouts/Layout.astro";
import { aboutPageContent } from "../config";
import SocialLinkBox from "../components/SocialLinkBox.astro";
import {marked} from "marked"

const pageDescription = marked.parse(aboutPageContent.about.description)
const connectDescription = marked.parse(aboutPageContent.connect.description)
---

<Layout seo={aboutPageContent.seo}>
  <div class="relative min-h-screen">
    <!-- Vertical text on left -->
    <div class="hidden lg:flex items-center justify-center w-16 fixed left-4 top-1/2 -translate-y-1/2">
      <p class="vertical-text text-xs tracking-[0.3em] uppercase opacity-40">
        Background
      </p>
    </div>

    <section class="px-6 lg:px-16 pt-16 lg:pt-24 max-w-4xl">
      <!-- Header -->
      <div class="mb-12">
        <span class="bracket-label opacity-60 mb-4 block">[Bio]</span>
        <h1 class="text-4xl lg:text-5xl font-bold tracking-tight mb-4">About</h1>
      </div>

      <!-- Bio content -->
      <div class="mb-16 max-w-2xl text-lg leading-relaxed opacity-80">
        <Fragment set:html={pageDescription} />
      </div>

      <!-- Images -->
      <div class="flex flex-col sm:flex-row gap-8 mb-20">
        {aboutPageContent.about.image_l.link ? (
          <a href={aboutPageContent.about.image_l.link} target="_blank" rel="noopener noreferrer" class="group">
            <Image
              src={aboutPageContent.about.image_l.url}
              alt={aboutPageContent.about.image_l.alt}
              width={350}
              height={250}
              class="w-full sm:w-[350px] h-[250px] object-cover rounded opacity-80 group-hover:opacity-100 transition-opacity"
            />
          </a>
        ) : (
          <Image
            src={aboutPageContent.about.image_l.url}
            alt={aboutPageContent.about.image_l.alt}
            width={350}
            height={250}
            class="w-full sm:w-[350px] h-[250px] object-cover rounded opacity-80"
          />
        )}
        {aboutPageContent.about.image_r.link ? (
          <a href={aboutPageContent.about.image_r.link} target="_blank" rel="noopener noreferrer" class="group">
            <Image
              src={aboutPageContent.about.image_r.url}
              alt={aboutPageContent.about.image_r.alt}
              width={180}
              height={250}
              class="w-[180px] h-[250px] object-cover rounded opacity-80 group-hover:opacity-100 transition-opacity"
            />
          </a>
        ) : (
          <Image
            src={aboutPageContent.about.image_r.url}
            alt={aboutPageContent.about.image_r.alt}
            width={180}
            height={250}
            class="w-[180px] h-[250px] object-cover rounded opacity-80"
          />
        )}
      </div>

      <!-- Connect section -->
      <div class="border-t border-gray-200 dark:border-gray-800 pt-12">
        <span class="bracket-label opacity-60 mb-6 block">[Connect]</span>
        <div class="max-w-xl opacity-80">
          <Fragment set:html={connectDescription} />
        </div>
        {aboutPageContent.connect.links.length > 0 && (
          <div class="grid grid-cols-2 gap-4 mt-8">
            {
              aboutPageContent.connect.links.map((item) => (
                <SocialLinkBox {...item} />
              ))
            }
          </div>
        )}
      </div>
    </section>
  </div>
</Layout>
